<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>運動島 Sports Island</title>

  <!-- Tailwind（維持現況） -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- LIFF -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body class="bg-slate-50 min-h-screen font-sans">

<!-- ===================== BANNER ===================== -->
<div class="w-full">
  <img
    src="https://aiwe.cc/wp-content/uploads/2025/12/3486bc19dc6317e16bf4f1449ec52ae4.jpg"
    class="w-full object-cover"
    alt="banner"
  />
</div>

<!-- ===================== 主容器 ===================== -->
<div class="max-w-md mx-auto bg-white min-h-screen shadow-lg">

  <!-- ====== 頁面切換 ====== -->
  <div id="view-member" class="p-6">

    <h2 class="text-xl font-black mb-4">會員資料</h2>

    <!-- 新增會員 -->
    <form id="memberForm" class="space-y-4">

      <!-- 姓名 -->
      <div>
        <label class="text-xs font-bold">成員姓名</label>
        <input id="mName" required
          class="w-full p-3 bg-slate-100 rounded-lg"/>
      </div>

      <!-- 電話 -->
      <div>
        <label class="text-xs font-bold">聯絡電話</label>
        <input id="mPhone" required
          class="w-full p-3 bg-slate-100 rounded-lg"/>
      </div>

      <!-- 性別 -->
      <div>
        <label class="text-xs font-bold">性別</label>
        <select id="mGender"
          class="w-full p-3 bg-slate-100 rounded-lg">
          <option value="男">男</option>
          <option value="女">女</option>
        </select>
      </div>

      <!-- 生日 -->
      <div>
        <label class="text-xs font-bold">生日</label>
        <input type="date" id="mBirthday"
          class="w-full p-3 bg-slate-100 rounded-lg"/>
      </div>

      <!-- ✅ 居住地區（完整縣市） -->
      <div>
        <label class="text-xs font-bold">居住地區</label>
        <select id="mAddress"
          class="w-full p-3 bg-slate-100 rounded-lg" required>
          <option value="">請選擇縣市</option>
          <option>台北市</option>
          <option>新北市</option>
          <option>桃園市</option>
          <option>台中市</option>
          <option>台南市</option>
          <option>高雄市</option>
          <option>基隆市</option>
          <option>新竹市</option>
          <option>新竹縣</option>
          <option>苗栗縣</option>
          <option>彰化縣</option>
          <option>南投縣</option>
          <option>雲林縣</option>
          <option>嘉義市</option>
          <option>嘉義縣</option>
          <option>屏東縣</option>
          <option>宜蘭縣</option>
          <option>花蓮縣</option>
          <option>台東縣</option>
          <option>澎湖縣</option>
          <option>金門縣</option>
          <option>連江縣</option>
        </select>
      </div>

      <!-- 關係 -->
      <div>
        <label class="text-xs font-bold">關係</label>
        <select id="mRelation"
          class="w-full p-3 bg-slate-100 rounded-lg">
          <option value="本人">本人</option>
          <option value="子女">子女</option>
          <option value="家人">家人</option>
        </select>
      </div>

      <!-- 儲存 -->
      <button
        type="submit"
        class="w-full py-4 bg-green-600 text-white font-black rounded-xl">
        儲存會員資料
      </button>

    </form>
  </div>

</div>

<!-- ===================== Script ===================== -->
<script>
const API_URL = "https://sport.wetw-net3.workers.dev/";
let currentUid = "";

async function init() {
  await liff.init({ liffId: "2008792551-CzPJtVB1" });
  if (!liff.isLoggedIn()) {
    liff.login();
    return;
  }
  const p = await liff.getProfile();
  currentUid = p.userId;
}

document.getElementById("memberForm").onsubmit = async (e) => {
  e.preventDefault();

  const payload = {
    action: "saveFamily",
    userId: currentUid,
    name: mName.value,
    phone: mPhone.value,
    gender: mGender.value,
    birthday: mBirthday.value,
    address: mAddress.value,
    relation: mRelation.value
  };

  const res = await fetch(API_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  }).then(r => r.json());

  alert(res.success ? "儲存成功" : res.msg);
};

window.onload = init;
</script>

</body>
</html>
