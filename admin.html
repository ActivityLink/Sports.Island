<!-- æª”æ¡ˆåç¨±ï¼šAdmin.html (ç®¡ç†å¾Œå° - V6.2 ç©©å®šé€£ç·šç‰ˆ) -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é‹å‹•å³¶ç³»çµ± - ç®¡ç†ä¸­å¿ƒ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
    
    /* åŸºç¤è¨­è¨ˆï¼šå»ç²—é«”ã€é«˜å°æ¯”ã€æ¨™æº–å­—é«”å¤§å° */
    body { background-color: #f8fafc; font-family: 'Inter', -apple-system, sans-serif; color: #1e293b; font-size: 15px; }
    
    /* å´é‚Šæ¬„ï¼šæ·±è—å°ˆæ¥­é…è‰² */
    .sidebar { background-color: #0f172a; width: 260px; }
    .sidebar-item { color: #94a3b8; transition: all 0.2s; border-left: 4px solid transparent; }
    .sidebar-item:hover { color: #f8fafc; background-color: #1e293b; }
    .sidebar-item.active { background-color: #1e293b; color: #ffffff; border-left: 4px solid #10b981; }
    
    /* é¡åˆ¥æ¨™ç±¤ï¼šé®®è±”è‰²å¡Šè­˜åˆ¥ */
    .badge { padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500; }
    .cat-å–®æ—¥ { background-color: #dbeafe; color: #1e40af; }
    .cat-æ¢¯æ¬¡ { background-color: #d1fae5; color: #065f46; }
    .cat-ç‡ŸéšŠ { background-color: #ffedd5; color: #9a3412; }
    .cat-èª²å¾Œ { background-color: #f3e8ff; color: #6b21a8; }

    /* è¡¨å–®èˆ‡è¼¸å…¥æ¡†ï¼šç°¡æ½”åœ“è§’é¢¨æ ¼ */
    .input-field { 
      width: 100%; padding: 12px 16px; background: #ffffff; 
      border: 1px solid #e2e8f0; border-radius: 6px; font-size: 15px; outline: none; 
    }
    .input-field:focus { border-color: #10b981; box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.05); }
    .input-readonly { background-color: #f1f5f9; color: #64748b; cursor: not-allowed; }
    .label-text { font-size: 12px; font-weight: 600; color: #64748b; text-transform: uppercase; margin-bottom: 8px; display: block; }

    /* å…¨è¢å¹•ç·¨è¼¯å™¨æ¨¡å¼ */
    #full-editor { display: none; position: fixed; inset: 0; background: #ffffff; z-index: 1000; overflow-y: auto; }
    #full-editor.active { display: block; }
    .section-card { border: 1px solid #e2e8f0; padding: 32px; border-radius: 12px; margin-bottom: 24px; background: #ffffff; }
    .section-title { font-size: 18px; font-weight: 600; color: #1e293b; margin-bottom: 24px; border-left: 4px solid #10b981; padding-left: 12px; }

    /* è¡¨æ ¼å¼·åŒ– */
    table th { background-color: #f1f5f9; color: #475569; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; }
    table td { border-bottom: 1px solid #f1f5f9; }
  </style>
</head>
<body class="flex min-h-screen">

  <!-- 1. å·¦å´å°è¦½åˆ— -->
  <aside class="sidebar flex flex-col fixed inset-y-0 left-0 z-50 shadow-xl">
    <div class="p-8 border-b border-slate-800 flex items-center space-x-3">
      <div class="w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center text-white font-bold italic">SI</div>
      <div class="flex flex-col">
        <span class="text-white font-medium text-base">é‹å‹•å³¶ä¸­å¿ƒ</span>
        <span class="text-slate-500 text-[10px] tracking-widest uppercase">Admin System</span>
      </div>
    </div>
    <nav class="flex-grow py-8 px-4 space-y-2">
      <button onclick="switchTab('courses')" id="btn-courses" class="sidebar-item active w-full flex items-center px-4 py-3 rounded-lg text-sm font-medium">
        <span class="mr-3 opacity-60">ğŸ“</span> èª²ç¨‹è¦æ ¼ç®¡ç†
      </button>
      <button onclick="switchTab('settings')" id="btn-settings" class="sidebar-item w-full flex items-center px-4 py-3 rounded-lg text-sm font-medium">
        <span class="mr-3 opacity-60">âš™ï¸</span> ç³»çµ±åƒæ•¸è¨­å®š
      </button>
    </nav>
    <div class="p-6 text-[10px] text-slate-500 font-medium">VERSION 2026.01.V6</div>
  </aside>

  <!-- 2. ä¸»åˆ—è¡¨å€ -->
  <main class="flex-grow ml-[260px] p-12">
    
    <!-- èª²ç¨‹åˆ—è¡¨å€å¡Š -->
    <section id="section-courses">
      <div class="flex justify-between items-center mb-10">
        <div>
          <h2 class="text-2xl font-semibold text-slate-800 tracking-tight">èª²ç¨‹è¦æ ¼ç·¨ä¿®</h2>
          <p class="text-slate-400 text-sm mt-1">ç®¡ç†å¤šæ¢¯æ¬¡èª²ç¨‹ã€å–®æ—¥å®šåƒ¹èˆ‡ä¸å‡ºå¸­æ‰£æ¬¾é‚è¼¯</p>
        </div>
        <button onclick="openNewCourse()" class="bg-emerald-500 text-white px-6 py-3 rounded-lg font-medium shadow-lg hover:bg-emerald-600 transition-all active:scale-95 text-sm">
          + æ–°å¢èª²ç¨‹è¦æ ¼
        </button>
      </div>

      <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="bg-slate-50 border-b border-slate-100">
              <th class="px-8 py-5">ç·¨è™Ÿ / é¡åˆ¥</th>
              <th class="px-8 py-5">åç¨± / æ•™ç·´</th>
              <th class="px-8 py-5">è²¡å‹™åƒæ•¸ (æ¯æ—¥/ç¸½é¡)</th>
              <th class="px-8 py-5">ç‡Ÿé‹æœŸé–“</th>
              <th class="px-8 py-5 text-right">æ“ä½œ</th>
            </tr>
          </thead>
          <tbody id="courseTableBody">
            <!-- èª²ç¨‹è³‡æ–™å°‡ç”± JS å‹•æ…‹å¡«å…¥ -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- ç³»çµ±è¨­å®šå€å¡Š -->
    <section id="section-settings" class="hidden">
      <h2 class="text-2xl font-semibold text-slate-800 mb-10">ç³»çµ±åƒæ•¸è¨­å®š</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
        <div class="bg-white p-10 rounded-2xl border border-slate-200 shadow-sm">
          <h3 class="font-bold text-slate-700 text-lg mb-6">è¨­å‚™ç§Ÿç”¨ç¯„æœ¬</h3>
          <div id="global-equip-list" class="space-y-4"></div>
          <button onclick="addGlobalEquip()" class="mt-6 text-xs font-semibold text-emerald-600 border-b border-emerald-200">+ æ–°å¢ç¯„æœ¬é …ç›®</button>
          <button onclick="saveGlobalSettings()" class="w-full mt-10 bg-slate-800 text-white py-4 rounded-xl font-bold tracking-widest hover:bg-slate-900 transition-all">åŒæ­¥å…¨åŸŸåƒæ•¸</button>
        </div>
        <div class="bg-white p-10 rounded-2xl border border-slate-200 shadow-sm">
          <h3 class="font-bold text-slate-700 text-lg mb-6">å…¨åŸŸé è¨­åŒ¯æ¬¾è³‡è¨Š</h3>
          <textarea id="global-payment" rows="8" class="input-field font-medium leading-relaxed" placeholder="è«‹åœ¨æ­¤è¼¸å…¥éŠ€è¡Œä»£ç¢¼èˆ‡å¸³è™Ÿ..."></textarea>
        </div>
      </div>
    </section>
  </main>

  <!-- 3. å…¨è¢å¹•æ²‰æµ¸å¼ç·¨è¼¯å™¨ (ä¸é®æ“‹ã€ç„¡ç°éšã€å­—é«”æ¨™æº–) -->
  <div id="full-editor">
    <div class="max-w-5xl mx-auto py-16 px-8">
      <div class="flex justify-between items-center mb-12 border-b border-slate-200 pb-8">
        <div>
          <h2 id="editorTitle" class="text-3xl font-semibold text-slate-800 tracking-tight">ç·¨è¼¯èª²ç¨‹è¦æ ¼</h2>
          <p class="text-slate-400 mt-2">è«‹ç¢ºä¿å¡«å¯«æ‰€æœ‰å¿…è¦çš„ç‡Ÿé‹èˆ‡è¨ˆè²»åƒæ•¸</p>
        </div>
        <button onclick="closeEditor()" class="bg-white text-slate-500 border border-slate-200 px-6 py-3 rounded-lg font-medium hover:bg-slate-50 transition-all">å–æ¶ˆä¸¦è¿”å›åˆ—è¡¨</button>
      </div>

      <form id="courseForm" class="space-y-8 pb-32">
        
        <!-- æ ¸å¿ƒè³‡æ–™ -->
        <div class="section-card">
          <h3 class="section-title">01 æ ¸å¿ƒè­˜åˆ¥è³‡æ–™</h3>
          <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <span class="label-text">èª²ç¨‹ç·¨è™Ÿ (ç³»çµ±ç”¢ç”Ÿ)</span>
              <input type="text" id="f-id" readonly class="input-field input-readonly font-mono font-semibold">
            </div>
            <div>
              <span class="label-text">èª²ç¨‹é¡åˆ¥</span>
              <select id="f-category" class="input-field">
                <option value="æ¢¯æ¬¡">æ¢¯æ¬¡èª²ç¨‹</option><option value="å–®æ—¥">å–®æ—¥èª²ç¨‹</option><option value="ç‡ŸéšŠ">ç‡ŸéšŠå°ˆå€</option><option value="èª²å¾Œ">èª²å¾Œç­</option>
              </select>
            </div>
            <div class="md:col-span-2">
              <span class="label-text">èª²ç¨‹æ­£å¼å…¨å</span>
              <input type="text" id="f-name" required class="input-field">
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
            <div><span class="label-text">æ¢¯æ¬¡ä»£è™Ÿ</span><input type="text" id="f-batch" class="input-field" placeholder="ä¾‹å¦‚ï¼š2026 å¤å­£ç¬¬ä¸€æ¢¯æ¬¡"></div>
            <div><span class="label-text">è² è²¬æ•™ç·´</span><input type="text" id="f-coach" class="input-field" placeholder="å¤šä½æ•™ç·´è«‹ç”¨é€—è™Ÿåˆ†éš”"></div>
          </div>
        </div>

        <!-- è²¡å‹™è¨ˆè²» -->
        <div class="section-card">
          <h3 class="section-title">02 è²¡å‹™è¨ˆè²»èˆ‡æ—¥æœŸ (å»ç§’)</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div><span class="label-text text-emerald-600">æ¯æ—¥å–®åƒ¹åŸºæº–</span><input type="number" id="f-baseUnit" class="input-field font-semibold text-emerald-600"></div>
            <div><span class="label-text">å…¨æ¢¯æ¬¡å®Œæ•´å®šåƒ¹</span><input type="number" id="f-fullPrice" class="input-field font-semibold"></div>
            <div><span class="label-text">é–‹å§‹æ—¥æœŸ</span><input type="date" id="f-start" class="input-field"></div>
            <div><span class="label-text">çµæŸæ—¥æœŸ</span><input type="date" id="f-end" class="input-field"></div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8 p-6 bg-rose-50/50 rounded-xl border border-rose-100">
            <div><span class="label-text text-rose-500">æ—©é³¥å„ªæƒ æˆªæ­¢æ—¥æœŸ</span><input type="date" id="f-earlyDeadline" class="input-field border-rose-200 focus:border-rose-400"></div>
            <div><span class="label-text text-rose-500">æ—©é³¥å…¨æ¢¯æ¬¡å„ªæƒ åƒ¹</span><input type="number" id="f-earlyPrice" class="input-field border-rose-200 focus:border-rose-400 font-semibold text-rose-600"></div>
          </div>
        </div>

        <!-- è¨­å‚™ç§Ÿç”¨ -->
        <div class="section-card">
          <div class="flex justify-between items-center mb-8">
            <h3 class="section-title mb-0">03 è¨­å‚™åŠ è³¼è¨­å®š</h3>
            <button type="button" onclick="addCourseEquip()" class="text-xs font-semibold text-emerald-600 border border-emerald-200 px-3 py-1 rounded-md hover:bg-emerald-50">+ æ–°å¢åŠ è³¼é …</button>
          </div>
          <div id="course-equip-list" class="space-y-4"></div>
        </div>

        <!-- èªªæ˜èˆ‡åª’é«” -->
        <div class="section-card">
          <h3 class="section-title">04 è©³ç´°èªªæ˜èˆ‡ç™¼å¸ƒ</h3>
          <div class="space-y-6">
            <div><span class="label-text">èª²ç¨‹å°ˆå±¬åŒ¯æ¬¾è³‡è¨Š (ç•™ç©ºå‰‡å¥—ç”¨é è¨­)</span><textarea id="f-paymentInfo" rows="2" class="input-field"></textarea></div>
            <div><span class="label-text">è©³ç´°èª²ç¨‹èªªæ˜ / æ”œå¸¶ç‰©å“</span><textarea id="f-desc" rows="4" class="input-field"></textarea></div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div><span class="label-text">å°é¢åœ–ç‰‡ç¶²å€ (HTTPS)</span><input type="text" id="f-img" class="input-field text-xs"></div>
              <div><span class="label-text">æ‹›ç”Ÿäººæ•¸ä¸Šé™</span><input type="number" id="f-limit" class="input-field font-semibold"></div>
            </div>
            <div>
              <span class="label-text">ç•¶å‰ç™¼å¸ƒç‹€æ…‹</span>
              <select id="f-status" class="input-field font-semibold text-emerald-600">
                <option value="å ±åä¸­">å ±åä¸­ (é¡¯ç¤ºæ–¼å‰ç«¯)</option>
                <option value="å·²é¡æ»¿">å·²é¡æ»¿ (åœæ­¢å ±å)</option>
                <option value="åœè¾¦">åœè¾¦ (éš±è—)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="fixed bottom-0 left-[260px] right-0 p-8 bg-white border-t border-slate-200 shadow-2xl flex justify-center space-x-6 z-[1100]">
          <button type="submit" id="saveBtn" class="bg-emerald-500 text-white px-20 py-4 rounded-xl font-semibold shadow-lg shadow-emerald-100 hover:bg-emerald-600 transition-all tracking-widest text-lg">å„²å­˜è¦æ ¼ä¸¦åŒæ­¥é›²ç«¯</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // ä¿®æ­£ï¼šæ‰‹å‹•æŒ‡å®š Worker ç¶²å€ï¼Œè§£æ±º Sandbox ç’°å¢ƒä¸‹ window.location éŒ¯èª¤çš„å•é¡Œ
    const API_URL = "https://sport.wetw-net3.workers.dev/";
    let courseList = [];
    let globalConfig = { è¨­å‚™ç¯„æœ¬: [], é è¨­åŒ¯æ¬¾: "" };

    /** åˆå§‹åŒ–è¼‰å…¥ */
    async function init() {
      try {
        const res = await fetch(API_URL, { 
          method: 'POST', 
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ action: 'adminGetData' }) 
        });
        if (!res.ok) throw new Error('é€£ç·šç•°å¸¸');
        const data = await res.json();
        courseList = data.èª²ç¨‹ || [];
        globalConfig = data.è¨­å®š || { è¨­å‚™ç¯„æœ¬: [], é è¨­åŒ¯æ¬¾: "" };
        renderTable();
      } catch(e) { 
        console.error("Fetch Error:", e);
        alert("ç„¡æ³•é€£ç·šè‡³ä¼ºæœå™¨ã€‚è«‹ç¢ºèªæ‚¨çš„ Cloudflare Worker ç¶²å€æ˜¯å¦æ­£ç¢ºã€‚"); 
      }
    }

    function renderTable() {
      document.getElementById('courseTableBody').innerHTML = courseList.map((c, i) => `
        <tr class="hover:bg-slate-50 transition-all group font-medium">
          <td class="px-8 py-6">
            <div class="font-mono text-xs text-slate-400 mb-1">${c.id}</div>
            <span class="badge cat-${c.category.substring(0,2)} inline-block">${c.category}</span>
          </td>
          <td class="px-8 py-6">
            <div class="text-slate-800 font-semibold text-base">${c.name}</div>
            <div class="text-[11px] text-slate-400 mt-1 uppercase font-medium tracking-wider">${c.batch || '-'} | æ•™ç·´: ${c.coach}</div>
          </td>
          <td class="px-8 py-6">
            <div class="text-emerald-600 font-semibold text-base font-mono">$${c.baseUnit}</div>
            <div class="text-[11px] text-slate-400 mt-1 uppercase">å…¨æ¢¯æ¬¡: $${c.fullPrice}</div>
          </td>
          <td class="px-8 py-6 text-sm text-slate-400 font-mono">${c.start} ~ ${c.end}</td>
          <td class="px-8 py-6 text-right opacity-0 group-hover:opacity-100 transition-all">
            <button onclick="editCourse(${i})" class="text-blue-500 text-xs font-semibold mr-4 hover:underline">ç·¨è¼¯</button>
            <button onclick="cloneCourse(${i})" class="text-slate-400 text-xs font-semibold hover:underline">è¤‡è£½</button>
          </td>
        </tr>`).join('');
    }

    function generateId() { return "C" + Math.floor(Date.now() / 1000); }

    function openNewCourse() {
      document.getElementById('courseForm').reset();
      document.getElementById('f-id').value = generateId();
      document.getElementById('course-equip-list').innerHTML = "";
      globalConfig.è¨­å‚™ç¯„æœ¬.forEach(e => createEquipRow(document.getElementById('course-equip-list'), e.é …ç›®, e.é‡‘é¡, e.è¨ˆè²»é¡å‹, "f-equip-item"));
      document.getElementById('full-editor').classList.add('active');
    }

    function closeEditor() { document.getElementById('full-editor').classList.remove('active'); }

    function editCourse(idx) {
      fillForm(courseList[idx]);
      document.getElementById('full-editor').classList.add('active');
    }

    function cloneCourse(idx) {
      fillForm(courseList[idx]);
      document.getElementById('f-id').value = generateId();
      document.getElementById('full-editor').classList.add('active');
    }

    function fillForm(c) {
      document.getElementById('f-id').value = c.id;
      document.getElementById('f-category').value = c.category;
      document.getElementById('f-name').value = c.name;
      document.getElementById('f-batch').value = c.batch;
      document.getElementById('f-coach').value = c.coach;
      document.getElementById('f-start').value = c.start;
      document.getElementById('f-end').value = c.end;
      document.getElementById('f-baseUnit').value = c.baseUnit;
      document.getElementById('f-fullPrice').value = c.fullPrice;
      document.getElementById('f-earlyDeadline').value = c.earlyBirdEnd;
      document.getElementById('f-earlyPrice').value = c.earlyPrice || 0;
      document.getElementById('f-paymentInfo').value = c.paymentInfo;
      document.getElementById('f-desc').value = c.desc;
      document.getElementById('f-img').value = c.img;
      document.getElementById('f-limit').value = c.limit;
      document.getElementById('f-status').value = c.status;
      const list = document.getElementById('course-equip-list');
      list.innerHTML = "";
      try {
        JSON.parse(c.equips || "[]").forEach(e => createEquipRow(list, e.é …ç›®, e.é‡‘é¡, e.è¨ˆè²»é¡å‹, "f-equip-item"));
      } catch(err) {}
    }

    function createEquipRow(container, name = "", price = "", type = "æŒ‰å¤©è¨ˆè²»", className = "") {
      const div = document.createElement('div');
      div.className = `flex items-center space-x-4 ${className}`;
      div.innerHTML = `
        <input type="text" placeholder="é …ç›®" value="${name}" class="flex-grow input-field">
        <input type="number" placeholder="é‡‘é¡" value="${price}" class="w-24 input-field font-mono font-semibold text-emerald-600">
        <select class="w-32 input-field text-xs font-semibold">
          <option value="æŒ‰å¤©è¨ˆè²»" ${type==='æŒ‰å¤©è¨ˆè²»'?'selected':''}>æŒ‰å¤©è¨ˆè²»</option>
          <option value="å–®æ¬¡å›ºå®š" ${type==='å–®æ¬¡å›ºå®š'?'selected':''}>å–®æ¬¡å›ºå®š</option>
        </select>
        <button type="button" onclick="this.parentElement.remove()" class="text-slate-300 hover:text-rose-500 text-xl font-bold px-2">&times;</button>`;
      container.appendChild(div);
    }

    async function submitForm() {
      const btn = document.getElementById('saveBtn');
      btn.disabled = true;
      const equips = [];
      document.querySelectorAll('.f-equip-item').forEach(el => {
        const ins = el.querySelectorAll('input'); const sel = el.querySelector('select');
        if(ins[0].value) equips.push({é …ç›®: ins[0].value, é‡‘é¡: Number(ins[1].value), è¨ˆè²»é¡å‹: sel.value});
      });

      const data = {
        action: 'adminSaveCourse',
        id: document.getElementById('f-id').value,
        category: document.getElementById('f-category').value,
        name: document.getElementById('f-name').value,
        batch: document.getElementById('f-batch').value,
        coach: document.getElementById('f-coach').value,
        start: document.getElementById('f-start').value,
        end: document.getElementById('f-end').value,
        baseUnit: Number(document.getElementById('f-baseUnit').value),
        fullPrice: Number(document.getElementById('f-fullPrice').value),
        earlyBirdEnd: document.getElementById('f-earlyDeadline').value,
        earlyPrice: Number(document.getElementById('f-earlyPrice').value),
        limit: Number(document.getElementById('f-limit').value),
        status: document.getElementById('f-status').value,
        img: document.getElementById('f-img').value,
        desc: document.getElementById('f-desc').value,
        equips: JSON.stringify(equips),
        paymentInfo: document.getElementById('f-paymentInfo').value
      };

      try {
        await fetch(API_URL, { method: 'POST', body: JSON.stringify(data) });
        alert("è¦æ ¼åŒæ­¥æˆåŠŸ"); init(); closeEditor();
      } catch(e) { alert("å„²å­˜å¤±æ•—"); }
      finally { btn.disabled = false; }
    }

    function switchTab(tab) {
      ['courses', 'settings'].forEach(t => {
        document.getElementById('section-' + t).classList.toggle('hidden', t !== tab);
        document.getElementById('btn-' + t).classList.toggle('active', t === tab);
      });
      if(tab === 'settings') renderSettings();
    }

    function renderSettings() {
      document.getElementById('global-payment').value = globalConfig.é è¨­åŒ¯æ¬¾ || "";
      const list = document.getElementById('global-equip-list'); list.innerHTML = "";
      globalConfig.è¨­å‚™ç¯„æœ¬.forEach(e => createEquipRow(list, e.é …ç›®, e.é‡‘é¡, e.è¨ˆè²»é¡å‹, "g-equip-item"));
    }

    async function saveGlobalSettings() {
      const template = [];
      document.querySelectorAll('.g-equip-item').forEach(el => {
        const ins = el.querySelectorAll('input'); const sel = el.querySelector('select');
        if(ins[0].value) template.push({é …ç›®: ins[0].value, é‡‘é¡: Number(ins[1].value), è¨ˆè²»é¡å‹: sel.value});
      });
      await fetch(API_URL, { 
        method: 'POST', 
        body: JSON.stringify({ action: 'adminSaveSettings', è¨­å‚™ç¯„æœ¬: JSON.stringify(template), é è¨­åŒ¯æ¬¾: document.getElementById('global-payment').value }) 
      });
      alert("å…¨åŸŸè¨­å®šå·²æ›´æ–°"); init();
    }

    function addGlobalEquip() { createEquipRow(document.getElementById('global-equip-list'), "", 0, "æŒ‰å¤©è¨ˆè²»", "g-equip-item"); }
    function addCourseEquip() { createEquipRow(document.getElementById('course-equip-list'), "", 0, "æŒ‰å¤©è¨ˆè²»", "f-equip-item"); }

    window.onload = init;
  </script>
</body>
</html>
